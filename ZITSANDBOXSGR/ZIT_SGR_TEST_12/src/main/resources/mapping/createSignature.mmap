<xiObj xmlns="urn:sap-com:xi"><idInfo VID="01"><vc caption="LOCAL" sp="-1" swcGuid="00000000000000000000000000000000" vcType="S"><clCxt consider="A"/></vc><key typeID="XI_TRAFO" version=""/><version>1.0</version></idInfo><documentation><description/></documentation><generic><admInf><modifBy>sgr</modifBy><modifAt></modifAt><modifAtLong>1705931121787</modifAtLong><owner/></admInf><lnks><lnkRole kpos="1" role="TARGET_IFR_MESS"><lnk rMode="R"><key typeID="wsdl" version="1.1"><elem>CSV_XML.wsdl</elem><elem>src/main/resources/wsdl</elem><elem>CSV_XML</elem><elem></elem></key></lnk></lnkRole><lnkRole kpos="1" role="SOURCE_IFR_MESS"><lnk rMode="R"><key typeID="wsdl" version="1.1"><elem>CSV_XML.wsdl</elem><elem>src/main/resources/wsdl</elem><elem>CSV_XML</elem><elem></elem></key></lnk></lnkRole></lnks><textInfo loadedL="EN"><textObj id="c2691c90042d4ee28e8c7f5e696ecf0f" masterL="EN" type="0"><texts lang="EN"><text label=""/><text label="21327ec998d3248b3333da4cbe20b699"></text><text label="60a872a774c7b847a6222e49d0cb9a0f">createHashHmac</text><text label="8239df992d0c31b9c7a867d5558386f6">User-Defined</text><text label="f6cfaf15d5014ec9fc4497f05afdbd18">Creates hash HMAC value. First argument is algorithm for example 'HmacSHA1'. Second argument is data. Third argument is key.</text><text label="ba2d0b5325cb6a3d388327ea1d12a3ea">Algorithm</text><text label="02b62c18f549fd39040d99b1144e2aa9">Signature base string</text><text label="77305118ded3917059426a11a6e76443">Key</text><text label="7a4cc75607b217a781f8e4a79d01f2d7">encodeBase64Utf8</text><text label="6286b49c5c1a585fe4df8bddfa879476">User-Defined</text><text label="600d120e1517cb78f212c1c123bdc644">Encodes an utf-8 string with base64.</text><text label="9d7a262c3429cb00c44aca3b244c5195">Value</text></texts></textObj></textInfo></generic><content><tr:XiTrafo xmlns:tr="urn:sap-com:xi:mapping:xitrafo"><tr:MetaData><mappingtool version="XI7.1"><project version="XI7.1"><libstorage><entry name="usernamespace"><functionstorage version="XI7.1"><key><key typeID="FUNC_LIB"><elem>LocalUserFunctions</elem><elem>http://com.sap.xi</elem></key></key><classname>_createSignature_</classname><package>com.sap.xi.tf</package><imports>import com.sap.aii.mapping.api.*;
import com.sap.aii.mapping.lookup.*;
import com.sap.aii.mappingtool.tf7.rt.*;
import java.io.*;
import java.lang.reflect.*;
import java.util.*;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
</imports><globals><javaText>public static String bytesToHex(byte[] hash) {
	StringBuilder hexString = new StringBuilder(2 * hash.length);
	for (byte h : hash) {
	  String hex = Integer.toHexString(0xff &amp; h);
	  if (hex.length() == 1)
		hexString.append('0');
	  hexString.append(hex);
	}
	return hexString.toString();
}</javaText></globals><init><functionmodel><signature cacheType="2"/><name>init</name><key>%init%</key><tab></tab><title></title><uiTitle></uiTitle><implementation type="udf"><javaText/></implementation></functionmodel></init><cleanup><javaText/></cleanup><functionmodel><signature cacheType="0"><argument jtp="String" nm="algorithm" tp="0"><uiTitle>Algorithm</uiTitle></argument><argument jtp="String" nm="data" tp="0"><uiTitle>Signature base string</uiTitle></argument><argument jtp="String" nm="key" tp="0"><uiTitle>Key</uiTitle></argument></signature><name>createHashHmac</name><key>3c9ac8bb-e967-11ec-9362-00059a3c7a00</key><tab>User-Defined</tab><title>createHashHmac</title><uiTitle>Creates hash HMAC value. First argument is algorithm for example 'HmacSHA1'. Second argument is data. Third argument is key.</uiTitle><implementation type="udf"><javaText>try {
	SecretKeySpec secretKeySpec = new SecretKeySpec(key.getBytes(), algorithm);
	Mac mac = Mac.getInstance(algorithm);
	mac.init(secretKeySpec);
	return bytesToHex(mac.doFinal(data.getBytes()));
} catch (Exception ex) {
	throw new RuntimeException("UDF createHashHmac: " + ex, ex);
}</javaText></implementation></functionmodel><functionmodel><signature cacheType="0"><argument jtp="String" nm="value" tp="0"><uiTitle>Value</uiTitle></argument></signature><name>encodeBase64Utf8</name><key>d219b66a-e96f-11ec-8aeb-00059a3c7a00</key><tab>User-Defined</tab><title>encodeBase64Utf8</title><uiTitle>Encodes an utf-8 string with base64.</uiTitle><implementation type="udf"><javaText>try {
	return Base64.getEncoder().encodeToString(value.getBytes("UTF-8"));
} catch (UnsupportedEncodingException e) {
	throw new StreamTransformationException("UDF base64EncodeUTF8: " + e.getMessage(), e);
}</javaText></implementation></functionmodel><usedjars/></functionstorage></entry></libstorage><transformation><brick gid="0" path="/CSV_XML/ROW" type="Dst"><viewData x="190" y="25"/><arg><brick fname="const" fns="dflt" type="Func"><viewData x="50" y="25"/><bindings><param name="value"><value/></param></bindings></brick></arg><group/></brick><brick gid="0" path="/CSV_XML/ROW/COL_1" type="Dst"><viewData x="330" y="81"/><arg><brick fname="3c9ac8bb-e967-11ec-9362-00059a3c7a00" fns="usernamespace" type="Func"><viewData x="190" y="81"/><arg><brick fname="const" fns="dflt" type="Func"><viewData x="50" y="25"/><bindings><param name="value"><value>HmacSHA256</value></param></bindings></brick></arg><arg pin="1"><brick fname="const" fns="dflt" type="Func"><viewData x="50" y="80"/><bindings><param name="value"><value>baeldung</value></param></bindings></brick></arg><arg pin="2"><brick fname="const" fns="dflt" type="Func"><viewData x="50" y="136"/><bindings><param name="value"><value>123456</value></param></bindings></brick></arg></brick></arg><group/></brick><brick gid="0" path="/CSV_XML/ROW/COL_2" type="Dst"><viewData x="470" y="91"/><arg><brick fname="3c9ac8bb-e967-11ec-9362-00059a3c7a00" fns="usernamespace" object_uid="r5" type="Func"><viewData x="190" y="82"/><arg><brick fname="const" fns="dflt" type="Func"><viewData x="50" y="25"/><bindings><param name="value"><value>HmacSHA1</value></param></bindings></brick></arg><arg pin="1"><brick fname="const" fns="dflt" type="Func"><viewData x="50" y="80"/><bindings><param name="value"><value>first_name=Fname&amp;last_name=Lname&amp;email=test@email.com&amp;external_user_id=ext_id_test&amp;timestamp=1654270002</value></param></bindings></brick></arg><arg pin="2"><brick fname="const" fns="dflt" type="Func"><viewData x="50" y="137"/><bindings><param name="value"><value>demo_shared_secret_string_123</value></param></bindings></brick></arg></brick></arg><group object_uid="g0"/></brick><brick gid="0" path="/CSV_XML/ROW/COL_3" type="Dst"><viewData x="470" y="28"/><arg><brick fname="d219b66a-e96f-11ec-8aeb-00059a3c7a00" fns="usernamespace" type="Func"><viewData x="330" y="46"/><arg><brick object_uid="r5"/></arg></brick></arg><group object_uid="g0"/></brick></transformation><testData><instances/></testData><ViewState></ViewState><pcont/></project></mappingtool></tr:MetaData><tr:ByteCodeJar/><tr:SourceStructure/><tr:TargetStructure/><tr:Multiplicity>1:1</tr:Multiplicity><tr:SourceParameters><tr:Parameter><tr:Position>1</tr:Position><tr:Minoccurs>1</tr:Minoccurs><tr:Maxoccurs>1</tr:Maxoccurs></tr:Parameter></tr:SourceParameters><tr:TargetParameters><tr:Parameter><tr:Position>1</tr:Position><tr:Minoccurs>1</tr:Minoccurs><tr:Maxoccurs>1</tr:Maxoccurs></tr:Parameter></tr:TargetParameters></tr:XiTrafo></content></xiObj>